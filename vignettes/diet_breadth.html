<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="author" content="Michael Holton Price" />

<meta name="date" content="2019-04-05" />

<title>Diet Breadth Model in foragerR</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' || rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<link href="data:text/css;charset=utf-8,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23header%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%20code%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" rel="stylesheet" type="text/css" />




</head>

<body>




<h1 class="title toc-ignore">Diet Breadth Model in foragerR</h1>
<h4 class="author">Michael Holton Price</h4>
<h4 class="date">2019-04-05</h4>



<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>The diet breadth model is a classic foraging model first introduced by MacArthur and Pianka (1966) in American Naturalist, “On Optimal Use of a Patchy Environment” (Volume 100, pages 603-609). This vignette describes the diet breadth model implemented in the open source R package forageR available at . The package can be installed with these commands:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(devtools)
<span class="kw">install_github</span>(<span class="st">'MichaelHoltonPrice/forageR'</span>)</code></pre></div>
</div>
<div id="model" class="section level2">
<h2>Model</h2>
<p>A forager searches a landscape for resources indexed by <span class="math inline">\(i\)</span>. Researches are searched for simultaneously and aach resource is encountered according to a Poisson process with encounter rate <span class="math inline">\(\lambda_i\)</span>. When a resource is encountered, the forager chooses to procure it or ignore it and continue searching for other resources. If the forager procures it, the forager spends <span class="math inline">\(h_i\)</span> time procuring the resource (the handling time) and gains <span class="math inline">\(u_i\)</span> from procuring it (the utility; usually energy in kilocalories).</p>
<p>Each resource has an on encounter return rate, or rank, given by</p>
<p><span class="math display">\[q_i = \frac{u_i}{h_i}\]</span></p>
<p>Let <span class="math inline">\(b_i\)</span> be a boolean indicator variable that is <span class="math inline">\(1\)</span> is a resource is procured on encounter and <span class="math inline">\(0\)</span> otherwise. The overall return rate from foraging is</p>
<p><span class="math display">\[\frac{dV}{dt} = \frac{c_s + \sum_{i} \lambda_i \, u_i}{1 + \sum_{i} \lambda_i \, h_i} \]</span></p>
<p><span class="math inline">\(c_s\)</span> is the rate at which utility is lost during search (usually energy per time). There is a generally unique set of resources that a forager should procure on encounter to maximize this overall return rate. This optimal set is found by sorting resources from best to worst according to the on encounter return rate <span class="math inline">\(q_i\)</span>, then adding items to the diet so long as doing so improves the overall return rate. The first item excluded from the diet (and all remaining ones) has an on encounter return rate that is lower than the overall return rate achieved by procuring all higher ranked items.</p>
</div>
<div id="application-1-a-basic-example" class="section level2">
<h2>Application 1: A basic example</h2>
<p>The smallest set of information needed to call the diet breadth model is: a vector of resource encounter rates (lambda), a vector of resource utilities (u; usually calories of food item), and a vector of resource handling times (h). Let’s define three notional resources:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">u &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">100</span>,<span class="dv">2000</span>,<span class="dv">1000</span>) <span class="co"># kcal</span>
h &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">10</span>,<span class="dv">500</span>,<span class="dv">50</span>) <span class="co"># min</span>
lambda &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">10</span>,<span class="dv">2</span>,<span class="dv">1</span>) <span class="op">/</span><span class="st"> </span><span class="dv">60</span> <span class="co"># 1/ min</span></code></pre></div>
<p>The first resource provides 100 kilocalories (kcal), takes 10 minutes to handle, and is encountered 10 times per hour. The second resource provides 2000 kcal, takes 500 minutes to handle, and is encountered 2 times per hour. The third resource provides 1000 kcal, takes 50 minutes to handle, and is encountered 1 time per hour. The optimal set of resources to procure is found by calling <code>dietBreadthOptimalSet</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">optimalSet &lt;-<span class="st"> </span><span class="kw">dietBreadthOptimalSet</span>(u,h,lambda)
<span class="co">#&gt; Warning in lambda * u: longer object length is not a multiple of shorter</span>
<span class="co">#&gt; object length</span>
<span class="kw">print</span>(optimalSet)
<span class="co">#&gt; [1]  TRUE FALSE  TRUE</span></code></pre></div>
<p>optimalSet is boolean (or logical) vector the same length as the number of input resources. Entries are TRUE if the item is in the optimal set of items to procure and FALSE otherwise. For the notional resources defined above, the first and third resources are in the optimal set.</p>
<p>The function <code>dietBreadthReturnRate</code> calculates the overall foraging return rate given a set of resources that are procured on encounter, which can be specified with the input boolean vector include. If include is not specified, it is assumed that all resources are procured on encounter. Thus, the return rate returned by <code>dietBreadthReturnRate</code> is is not necessarily the optimal return rate. It is, however, the optimal return rate if it is called with the optimal set determined above:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">optimalReturnRate &lt;-<span class="st"> </span><span class="kw">dietBreadthReturnRate</span>(u,h,lambda,<span class="dt">include=</span>optimalSet)
<span class="kw">print</span>(optimalReturnRate)
<span class="co">#&gt; [1] 9.52381</span></code></pre></div>
<p>Rather than first calling <code>dietBreadthOptimalSet</code> then calling <code>dietBreadthReturnRate</code> to calculate the optimal return rate, the wrapper function <code>dietBreadthOptimalReturnRate</code> can be called to do this in one step:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">optimalReturnRate2 &lt;-<span class="st"> </span><span class="kw">dietBreadthOptimalReturnRate</span>(u,h,lambda)
<span class="co">#&gt; Warning in lambda * u: longer object length is not a multiple of shorter</span>
<span class="co">#&gt; object length</span>
<span class="kw">print</span>(optimalReturnRate2)
<span class="co">#&gt; [1] 9.52381</span></code></pre></div>
<p>It may be instructive do some further calculations to illustrate the underlying logic of the diet breadth model. One crucial variable is a resource’s on encounter return rate (called rank in some contexts, though sometimes rank is only used for the relative ordering of resources according to the on encounter return rate), which is the ratio of its utility to its handling time:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">rank &lt;-<span class="st"> </span>u <span class="op">/</span><span class="st"> </span>h
<span class="kw">print</span>(rank)
<span class="co">#&gt; [1] 10  4 20</span></code></pre></div>
<p>Resource 3 has the highest rank (20), followed by Resource 1 (10) and Resource 2 (4). When a given resource is encountered, it is only worth procuring if its on encounter return rate is greater than the overall return rate the forager can achieve with a set of resources that does not include the encountered resource. Clearly, the highest rank item should always be procured (though it is possible that foraging is a mistake to begin with). Additional items are added to the diet if doing so increases the overall return rate. Consider, therefore, the second ranked item once it has already been encountered. If that second item’s on encounter return rate exceeds the overall return rate from procuring only the first item, it should be added to the diet. Additional items are added in like manner in rank order so long as including them increases the overall return rate. To emphasize this, directly calculate the return rate with one (Resource 3), two (Resource 3 and Resource 1), and all items in the diet:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(<span class="kw">dietBreadthReturnRate</span>(u,h,lambda,<span class="dt">include=</span><span class="kw">c</span>(F,F,T)))
<span class="co">#&gt; [1] 9.090909</span>
<span class="kw">print</span>(<span class="kw">dietBreadthReturnRate</span>(u,h,lambda,<span class="dt">include=</span><span class="kw">c</span>(T,F,T)))
<span class="co">#&gt; [1] 9.52381</span>
<span class="kw">print</span>(<span class="kw">dietBreadthReturnRate</span>(u,h,lambda,<span class="dt">include=</span><span class="kw">c</span>(T,T,T)))
<span class="co">#&gt; [1] 4.958678</span></code></pre></div>
<p>Indeed, the overall return rate is highest when the two highest rank resources are procured (Resource 3 and Resource 1). Further, the on encounter return rate of the lowest ranked resource (Resource 2) is lower than the overall return rate of procuring the two higher rank resources, whereas the on encounter return rate of the middle resource (Resource 1) is higher than the overall return rate of procuring only the first ranked item (Resource 3). This is all consistent with the logic and requirements of the model.</p>
</div>
<div id="application-2-a-less-basic-example" class="section level2">
<h2>Application 2: A less basic example</h2>
<p>The preceding section provided a basic example of how to use the forageR diet breadth code. However, it has two shortcomings. First, archaeologists sometimes use a different set of variables. In particular, what may be available is (an estimate of) the abundance of a resource on the landscape rather than the encounter rate with that resource. Second, it is sometimes crucial to model the cost (energy loss) of both search and procurement while foraging; foragerR supports this. We therefore provide a more involved example, using data from Winterhalder et al. (1988), “The Population Ecology of Hunter-Gatherers and Their Prey” (Journal of Anthropological Archaeology, Volume 7, Pages 289-328). The forageR data set wintPrey contains data from that publication (primarily, though not exclusively, drawn from Table 6). Load and print this data:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(forageR)
<span class="kw">data</span>(wintPrey)
<span class="kw">print</span>(wintPrey)
<span class="co">#&gt;    name energy handling_time procure_loss density growth_rate</span>
<span class="co">#&gt; 1 Aprey  60000          1864            6     0.8         0.5</span>
<span class="co">#&gt; 2 Bprey  24000           836            6     2.6         0.5</span>
<span class="co">#&gt; 3 Cprey  13800           235            6     8.0         0.7</span>
<span class="co">#&gt; 4 Dprey   3600            95            6     6.4         0.3</span>
<span class="co">#&gt; 5 Eprey   2800           174            6    12.0         1.2</span>
<span class="co">#&gt; 6 Fprey   1500            67            6    40.0         1.5</span>
<span class="co">#&gt; 7 Gprey    240            26            6   300.0         2.0</span>
<span class="co">#&gt; 8 Hprey     90             7            6   500.0         3.5</span>
<span class="co">#&gt;   search_radius</span>
<span class="co">#&gt; 1        0.0175</span>
<span class="co">#&gt; 2        0.0175</span>
<span class="co">#&gt; 3        0.0175</span>
<span class="co">#&gt; 4        0.0175</span>
<span class="co">#&gt; 5        0.0175</span>
<span class="co">#&gt; 6        0.0175</span>
<span class="co">#&gt; 7        0.0175</span>
<span class="co">#&gt; 8        0.0175</span></code></pre></div>
<p>There are eight notional resources named Aprey through Hprey. For each, the following is given: the energy value (kcal), handling time (min), procurement loss (kcal/min), density (No. / km^2), growth rate (1/year), and search radius (km). The procurement loss (or procurement cost) is the rate at which the forager burns energy while procuring a resource. The search radius is the radius around a forager in which the resource is visible. While Winterhalder et al. (1988) assumes these are the same for all resources, forageR supports resource specific values. In addition to the resource traits in wintPrey, two additional traits must be specified: forager search speed and forager search cost. The forager search speed is the speed at which a forager moves through the landscape while searching for resources. The forager search cost (a rate), similar to procure_loss, is the rate at which a forager burns energy during search. Following Winterhalder et al. (1988), we assume a forager search speed of 0.5 km / hr and a forager search cost (rate) of 4 kcal / hr.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">foragerSpeed &lt;-<span class="st"> </span><span class="fl">0.5</span> <span class="op">/</span><span class="st"> </span><span class="dv">60</span> <span class="co"># km / min</span>
search_cost &lt;-<span class="st"> </span><span class="dv">4</span> <span class="co"># kcal / min</span></code></pre></div>
<p>forageR provides a wrapper function to convert from resource density on the landscape to encounter rate. The assumed relationship between these variables is:</p>
<p><span class="math display">\[\lambda_i = \rho_i \, 2 \, r_i \, u_s\]</span></p>
<p>where <span class="math inline">\(\lambda_i\)</span> is, as before, the encounter rate (units: Number / Time), <span class="math inline">\(rho_i\)</span> is the density of the resource on the landscape (Number / Area), <span class="math inline">\(r_i\)</span> is the search radius for the resource (Length), and <span class="math inline">\(u_s\)</span> is the search speed (Length / Time). The factor of <span class="math inline">\(2\)</span> arises because the forager looks left and right as he or she searches the landscape. Call the wrapper function to calculate the encounter rate for the preceding resources:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># units of lambda (encounter rate): per minute</span>
lambda &lt;-<span class="st"> </span><span class="kw">dietBreadthDensityToEncounterRate</span>(wintPrey<span class="op">$</span>density,wintPrey<span class="op">$</span>search_radius,foragerSpeed)
<span class="kw">print</span>(lambda)
<span class="co">#&gt; [1] 0.0002333333 0.0007583333 0.0023333333 0.0018666667 0.0035000000</span>
<span class="co">#&gt; [6] 0.0116666667 0.0875000000 0.1458333333</span></code></pre></div>
<p>forageR also provides a wrapper function to add the procurement cost for a resource. In wintPrey, the base utility of each resource is given by the column energy. The procurement cost is the energy lost per unit time (in minutes). The actual energy value accounting for procurement cost is</p>
<p><span class="math display">\[u_i = u_{0,i} - h_i * c_i\]</span></p>
<p>where <span class="math inline">\(v_{0,i}\)</span> is the base utility of the resource and <span class="math inline">\(c_i\)</span> is the procurement cost (rate). Extract the base utility in the variable u0 and the handling time from wintPrey (used below) and call the wrapper function to account for procurement cost:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">u0 &lt;-<span class="st"> </span>wintPrey<span class="op">$</span>energy <span class="co"># kcal</span>
h &lt;-<span class="st"> </span>wintPrey<span class="op">$</span>handling_time <span class="co"># min</span>
u &lt;-<span class="st"> </span><span class="kw">dietBreadthAddProcureCost</span>(u0,h,wintPrey<span class="op">$</span>procure_loss) <span class="co"># kcal</span>
<span class="kw">print</span>(u0)
<span class="co">#&gt; [1] 60000 24000 13800  3600  2800  1500   240    90</span>
<span class="kw">print</span>(u)
<span class="co">#&gt; [1] 48816 18984 12390  3030  1756  1098    84    48</span>
<span class="kw">print</span>(h)
<span class="co">#&gt; [1] 1864  836  235   95  174   67   26    7</span></code></pre></div>
<p>The optimal return rates using the base and modified resource utilities are (multiplying by 60 so the units are kilocalories per hour):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(<span class="kw">dietBreadthOptimalReturnRate</span>(u0,h,lambda)<span class="op">*</span><span class="dv">60</span>)
<span class="co">#&gt; [1] 1526.963</span>
<span class="kw">print</span>(<span class="kw">dietBreadthOptimalReturnRate</span>(u,h,lambda)<span class="op">*</span><span class="dv">60</span>)
<span class="co">#&gt; [1] 1295.784</span></code></pre></div>
<p>As pointed out above, search is also costly. If dietBreadthOptimalReturnRate is called without specifying a search cost (as above) the search cost is assumed to be zero. To specify a search cost, used the optional input c_s:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(<span class="kw">dietBreadthOptimalReturnRate</span>(u0,h,lambda,<span class="dt">c_s=</span>search_cost)<span class="op">*</span><span class="dv">60</span>)
<span class="co">#&gt; [1] 1441.082</span>
<span class="kw">print</span>(<span class="kw">dietBreadthOptimalReturnRate</span>(u,h,lambda,<span class="dt">c_s=</span>search_cost)<span class="op">*</span><span class="dv">60</span>)
<span class="co">#&gt; [1] 1209.904</span></code></pre></div>
<p>This correctly gives the optimal overall return rate, 1209.9 kcal/hr, reported in Table 8 of Winterhalder et al. (1988). Finally, forageR provides a function that gives an overall analysis of the diet:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(<span class="kw">dietBreadthAnalysis</span>(u,h<span class="op">/</span><span class="dv">60</span>,lambda<span class="op">*</span><span class="dv">60</span>,search_cost<span class="op">*</span><span class="dv">60</span>,wintPrey<span class="op">$</span>name))
<span class="co">#&gt;   name_lowest_rank return_rate q_lowest_rank optimal_set</span>
<span class="co">#&gt; 1            Cprey    965.2960     3163.4043       FALSE</span>
<span class="co">#&gt; 2            Dprey   1062.7545     1913.6842       FALSE</span>
<span class="co">#&gt; 3            Aprey   1165.1319     1571.3305       FALSE</span>
<span class="co">#&gt; 4            Bprey   1209.9035     1362.4880        TRUE</span>
<span class="co">#&gt; 5            Fprey   1160.3706      983.2836       FALSE</span>
<span class="co">#&gt; 6            Eprey   1079.6330      605.5172       FALSE</span>
<span class="co">#&gt; 7            Hprey    948.6079      411.4286       FALSE</span>
<span class="co">#&gt; 8            Gprey    719.0841      193.8462       FALSE</span></code></pre></div>
<p>The first row reports information for a diet that only involves the highest ranked item, Cprey. The next row adds the second ranked item, Dprey, and so forth through the last row which includes all items in the diet. The first column (name_lowest_rank) gives the name of the lowest ranked item in the diet (the name is an optional input to dietBreadthAnalysis). The second column (return_rate) gives the overall return rate. The third column (q_lowest_rank) gives the on encounter return rate of the lowest rank iterm in the diet. The fourth column (optimal_set) indicates the optimal set. The analysis printed above should be compared to Table 8in Winterhalder et al. (1988).</p>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
